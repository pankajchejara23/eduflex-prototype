{% extends 'base.html'%} {% load static %} {% load i18n %} {%block content%}

<style>
  .student-icon {
    background-image: linear-gradient(to right, #8e2de2, #4a00e0);
    color: white
  }
</style>

<div class="row">
  <p class="display-5 mt-4">Peetri Kooli Kasutaja 57</p>
  <br />
  <p class="h5 mt-4">Mathematics</p>
  <p class="text-grey">Performance on the learning trajectory</p>
</div>
<div class="row p-3 my-3 bg-light rounded justify-content-between ">
  <div class='col col-3 rounded shadow student-icon  p-3'>
    <div class="d-flex align-items-center justify-content-around">
      <div class='display-1 p-0 m-0'> 
        <i class="fas fa-list"></i>
      </div>
      <div class='d-flex-column'>
        <div class='display-3'> 105
        </div>
        <div class='fw-light'> Total tasks
        </div>
      </div>
    </div>
  </div>

  <div class='col col-3 rounded shadow student-icon  text-white  p-3'>
    <div class="d-flex align-items-center justify-content-around">
      <div class='display-1 p-0 m-0'> 
        <i class="fas fa-tasks"></i>
      </div>
      <div class='d-flex-column'>
        <div class='display-3'> 38
        </div>
        <div class='fw-light'> Tasks attempted
        </div>
      </div>
    </div>
  </div>
 
  <div class='col col-3 rounded shadow student-icon  text-white  p-3'>
    <div class="d-flex align-items-center justify-content-around">
      <div class='display-1 p-0 m-0'> 
        <i class="fas fa-award"></i>
      </div>
      <div class='d-flex-column'>
        <div class='display-3'> 31
        </div>
        <div class='fw-light'> Tasks corrected
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row p-3 pb-5 my-3 bg-light rounded justify-content-between ">
  <p class='h2'> Skill development </p>
  <p class="text-secondary small"> These are estimates of your development of Mathematics skills related to algebraic fractions.</p>
   <div class='col col-6 mt-5 '>
    <div class="d-flex align-items-center border rounded mb-2">
      <div class='p-3 lead'>
        Your current level of development of
       <b class='text-primary'>generalising operations with common fractions to algebraic fractions &
        understanding algebraic fractions</b> skill is <span class='badge bg-warning text-dark'>44%</span>.
      </div>
      <div class='p-2'>
        <canvas id='three1'>
        </canvas>
      </div>
    </div>
    <div class="d-flex align-items-center border rounded">
      <div class='p-3 lead'>
        Your current level of development of
       <b class='text-primary'>Reducing and expanding algebraic fractions; adding, substracting, multiplying and dividing two algebraic fractions; expanding and reducing algebraic fractions</b>
       skill is <span class='badge bg-warning text-dark'>64%</span>.
      </div>
      <div class='p-2'>
        <canvas id='four1'>
        </canvas>
      </div>
    </div>
  </div>
  <div class='col col-6 rounded pt-5'>
    <div class="row rounded justify-content-between p-2  bg-warning bg-gradient">
      <p class="fs-4 mb-0">Competence levels across skills</p>
      <p class="text-secondary fw-light">
        <small>
          The following scores indicate your level of mastery for skills targetted by the learning content. 

        </small>
      </p>
      <div class='col col-6 d-flex-column p-3 rounded bg-light shadow'>
        <div class='d-flex-column'>
          <p class="fs-5 mb-2">Your skills</p>
          <div  class="mb-3 p-2 rounded border ">
            <div class="text-success small mb-2">
              Projecting operations of adding common fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-success" role="progressbar" style="width: 96%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                96%
              </div>
            </div>
          </div>


          <div  class="mb-3 p-2 rounded border ">
            <div class="text-success small mb-2">
              Projecting operations of multiplication of common fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-success" role="progressbar" style="width: 99%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                99%
              </div>
            </div>
          </div>

          <div  class="mb-3 p-2 rounded border ">
            <div class="text-success small mb-2">
              Understanding algebraic fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-success" role="progressbar" style="width: 65%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                65%
              </div>
            </div>
          </div>

          

          <div  class="mb-3 p-2 rounded border ">
            <div class="text-danger small mb-2">
              Dividing algerbaic fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-danger" role="progressbar" style="width: 5%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                3%
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class='col col-6  p-3  '>
        <div class='d-flex-column'>
          <p class="fs-5 mb-2">Classroom average</p>
          <div  class="mb-3 p-2 rounded border ">
            <div class="text-secondary small mb-2">
              Projecting operations of adding common fractions
            </div>
            <div class="progress">
              <div class="progress-bar   bg-secondary" role="progressbar" style="width: 20%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                20%
              </div>
            </div>
          </div>

          

          <div  class="mb-3 p-2 rounded border ">
            <div class="text-secondary small mb-2">
              Projecting operations of multiplication of common fractions
            </div>
            <div class="progress">
              <div class="progress-bar   bg-secondary" role="progressbar" style="width: 43%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                43%
              </div>
            </div>
          </div>

          <div  class="mb-3 p-2 rounded border ">
            <div class="text-secondary small mb-2">
              Understanding algebraic fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-secondary" role="progressbar" style="width: 66%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                66%
              </div>
            </div>
          </div>

          

          <div  class="mb-3 p-2 rounded border ">
            <div class="text-secondary small mb-2">
              Dividing algerbaic fractions
            </div>
            <div class="progress">
              <div class="progress-bar  bg-secondary" role="progressbar" style="width: 21%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                21%
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    
  </div>

 
 

</div>
<div class="row p-3 rounded  bg-light shadow">
  <p class='display-5'> Learner Model </p>
  <p class='text-secondary'> The following network represents your current development of skills related to common and algebraic fractions. The network is also known as the learner model. The nodes represent various skills indicated by given labels. The edges represent the relationships between those skills. The <b>size</b> of a node shows your current level of mastery of that skill. For example, <b class='text-success'> you have a good understanding of algebraic fractions </b>, but you need to put extra effort to develop the skill of <b class='text-danger'> dividing algebraic fractions.</b>
  <div id='olm' style="min-width:700px;min-height:700px;">
  </div>
</div>

  <script>
    const ctx = document.getElementById("three1");
    const ctx2 = document.getElementById("four1");
 
    const tooltip1 = {
                        enabled: true,
                        callbacks: {
                            label: function (tooltipData) {
                                const labels = 
                                      tooltipData.dataset.label.toString();
                                const values =
                                  tooltipData.dataset.data[tooltipData.dataIndex];
                                const result = 
                                      tooltipData.dataset.data.reduce(
                                    (var1, var2) => var1 + var2,
                                    0
                                );
                                const percentage = 
                                      ((values / result) * 100).toFixed(2) + "%";

                                return `${labels}: ${percentage}`;
                            },
                        }
                      };

    const options1 = {
        plugins: {
          datalabels: {
            formatter: (value, ctx) => {
                let sum = 0;
                let dataArr = ctx.chart.data.datasets[0].data;
                dataArr.map(data => {
                    sum += data;
                });
                let percentage = (value*100 / sum).toFixed(2)+"%";
                return percentage;
            },
            color: '#fff',
        },
          tooltip: tooltip1,
          title: {
            display: false,
            text: "Skill III 4 Score",
          },
          legend: {
            display: false,
          },
        },
        tooltips: {
          enabled: false,
        },
      };
    new Chart(ctx, {
      type: "doughnut",
      data: {
        labels: ["Yes", "No"],
        datasets: [
          {
            label: "Skill III 5 Score",
            data: [44, 56],
            backgroundColor: ["rgb(60, 179, 113)", "rgb(255, 205, 86)"],
            hoverOffset: 4,
            borderRadius: 0,
            backgroundColor: ["#48BB78", "grey"],
            borderWidth: 0,
          },
        ],
      },
      options: options1,
      
    });

    new Chart(ctx2, {
      type: "doughnut",
      data: {
        labels: ["Yes", "No"],
        datasets: [
          {
            label: "Skill score",
            data: [64, 46], 
            backgroundColor: ["rgb(60, 179, 113)", "rgb(255, 205, 86)"],
            hoverOffset: 4,
            borderRadius: 0,
            backgroundColor: ["#48BB78", "grey"],
            borderWidth: 0,
          },
        ],
      },
      
    });



    
    cy_tmp = cytoscape({
  	   container: document.getElementById("olm"),

       style: [
          {
            selector: 'node',
            css: {
                  'content': 'data(name)',
                  'text-valign': 'bottom',
                  'font-size': '.3 rem',

            }
          },
          {
            selector: '[color]',
            css: {
               'background-color': 'data(color)',

            }
          },
          {
            selector: 'edge',
            css: {
                  'curve-style': 'bezier',
                  'target-arrow-shape': 'triangle',
                  'line-color': '#abb2b9 ',
                  'target-arrow-color': '#abb2b9 '
                }
          },
  				{
  					selector: '[size]',
  					css: {
                'width': 'data(size)',
                'height': 'data(size)',
  				  }
  				},
          {
  					selector: '[weight]',
  					css: {
                'width':'data(weight)',
                'height': 'data(size)',
                'color': 'black',
  					}
  				},
          
        ],
        layout: {
            name: 'cose',
  				}
  			});


      const nodes = [
       {'id': 0, 'name': 'III 5', 'weight': .64, 'position':{'x':100, 'y':100}},
       {'id': 1, 'name': 'multiplies algebraic fractions', 'weight': .79},
       {'id': 2, 'name': 'III 4', 'weight': .44, 'position':{'x':100, 'y':50}},
       {'id': 3,
         'name': 'projecting operations of  multiplication of common fractions',
         'weight': .99},
       {'id': 4, 'name': 'understanding algebraic fractions', 'weight': .65},
       {'id': 5, 'name': 'divides algerbaic fractions', 'weight': .3},
       {'id': 6,
         'name': 'adds and substracts of algebraic fractions',
         'weight': .3},
       {'id': 7, 'name': 'II 5', 'weight': .70},
       {'id': 8, 'name': 'understanding common fractions', 'weight': .3},
       {'id': 9,
         'name': 'projecting operations of adding common fractions',
         'weight': .96},
       {'id': 10,
         'name': 'projecting operations of expanding and reducing common fractions',
         'weight': .1},
       {'id': 11, 'name': 'expands and reduces common fractions', 'weight': .1},
       {'id': 12,
         'name': 'expands and reduces algebraic fractions',
         'weight': .99}];

  const edges = [{'id': 'e0', 'source': 0, 'target': 1},
 {'id': 'e1', 'source': 0, 'target': 5},
 {'id': 'e2', 'source': 0, 'target': 6},
 {'id': 'e3', 'source': 0, 'target': 12},
 {'id': 'e4', 'source': 1, 'target': 5},
 {'id': 'e5', 'source': 2, 'target': 3},
 {'id': 'e6', 'source': 2, 'target': 4},
 {'id': 'e7', 'source': 2, 'target': 9},
 {'id': 'e8', 'source': 2, 'target': 10},
 {'id': 'e9', 'source': 2, 'target': 0},
 {'id': 'e10', 'source': 3, 'target': 9},
 {'id': 'e11', 'source': 4, 'target': 12},
 {'id': 'e12', 'source': 6, 'target': 1},
 {'id': 'e13', 'source': 7, 'target': 8},
 {'id': 'e14', 'source': 7, 'target': 11},
 {'id': 'e15', 'source': 7, 'target': 2},
 {'id': 'e16', 'source': 7, 'target': 0},
 {'id': 'e17', 'source': 8, 'target': 11},
 {'id': 'e18', 'source': 10, 'target': 3},
 {'id': 'e19', 'source': 12, 'target': 6}];

  cy_tmp.elements().remove();



    for (n = 0 ; n < nodes.length; n ++) {
      var node_id = "" + nodes[n].id;
      
      cy_tmp.add({ group: 'nodes', data: { id: node_id,  name: nodes[n].name, color: '#48BB78', size:60*nodes[n].weight } });
    }

    for (n = 0 ; n < edges.length; n ++) {
      var edge_id = "" + edges[n].id;
     
      cy_tmp.add({ group: 'edges', data: { id: edge_id,  source: edges[n].source, target: edges[n].target , size:3 } });
    }
    cy_tmp.layout();
  </script>


  {% endblock %}
</div>
